{
  "version": 8,
  "name": "Dark",
  "metadata": {},
  "sources": {
    "ne2_shaded": {
      "maxzoom": 6,
      "tileSize": 256,
      "tiles": ["https://tiles.openfreemap.org/natural_earth/ne2sr/{z}/{x}/{y}.png"],
      "type": "raster"
    },
    "openmaptiles": {
      "type": "vector",
      "url": "https://tiles.openfreemap.org/planet"
    },
    "elr": {
      "type": "vector",
      "tiles": ["https://pmtiles-worker.glen-fitchett89.workers.dev/tiles/elr/{z}/{x}/{y}.mvt"],
      "minzoom": 8,
      "maxzoom": 20
    },
    "tracklines": {
      "type": "vector",
      "tiles": ["https://pmtiles-worker.glen-fitchett89.workers.dev/tiles/tracklines/{z}/{x}/{y}.mvt"],
      "minzoom": 8,
      "maxzoom": 20
    },
    "mileposts": {
      "type": "vector",
      "tiles": ["https://pmtiles-worker.glen-fitchett89.workers.dev/tiles/mileposts/{z}/{x}/{y}.mvt"],
      "minzoom": 8,
      "maxzoom": 20
    }
  },
  "sprite": "https://tiles.openfreemap.org/sprites/ofm_f384/ofm",
  "glyphs": "https://tiles.openfreemap.org/fonts/{fontstack}/{range}.pbf",
  "layers": [
    {
      "id": "background",
      "type": "background",
      "paint": {"background-color": "#0b0b0b"}
    },
    {
      "id": "park",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "park",
      "paint": {
        "fill-color": "#0F1A0F",
        "fill-opacity": 0.7,
        "fill-outline-color": "#0F1A0F"
      }
    },
    {
      "id": "park_outline",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "park",
      "paint": {"line-color": "#163b2d", "line-dasharray": [1, 1.5]}
    },
    {
      "id": "landuse_residential",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "maxzoom": 12,
      "filter": ["==", ["get", "class"], "residential"],
      "paint": {"fill-color": "#1c1c1c"}
    },
    {
      "id": "landcover_wood",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": ["==", ["get", "class"], "wood"],
      "paint": {
        "fill-antialias": false,
        "fill-color": "#1b1b1b",
        "fill-opacity": 0.4
      }
    },
    {
      "id": "landcover_grass",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": ["==", ["get", "class"], "grass"],
      "paint": {
        "fill-antialias": false,
        "fill-color": "#0F1A0F",
        "fill-opacity": 0.3
      }
    },
    {
      "id": "landcover_ice",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": ["==", ["get", "class"], "ice"],
      "paint": {
        "fill-antialias": false,
        "fill-color": "#222831",
        "fill-opacity": 0.8
      }
    },
    {
      "id": "landcover_wetland",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "minzoom": 12,
      "filter": ["==", ["get", "class"], "wetland"],
      "paint": {
        "fill-antialias": true,
        "fill-opacity": 0.8,
        "fill-pattern": "wetland_bg_11",
        "fill-translate-anchor": "map",
        "fill-color": "#1a2420"
      }
    },
    {
      "id": "landuse_pitch",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": ["==", ["get", "class"], "pitch"],
      "paint": {"fill-color": "#19361f"}
    },
    {
      "id": "landuse_track",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": ["==", ["get", "class"], "track"],
      "paint": {"fill-color": "#262626"}
    },
    {
      "id": "landuse_cemetery",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": ["==", ["get", "class"], "cemetery"],
      "paint": {"fill-color": "#202020"}
    },
    {
      "id": "landuse_hospital",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": ["==", ["get", "class"], "hospital"],
      "paint": {"fill-color": "#221c1c"}
    },
    {
      "id": "landuse_school",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": ["==", ["get", "class"], "school"],
      "paint": {"fill-color": "#1d1f26"}
    },
    {
      "id": "waterway_tunnel",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "waterway",
      "filter": ["==", ["get", "brunnel"], "tunnel"],
      "paint": {
        "line-color": "rgba(0, 37, 53, 1)",
        "line-dasharray": [3, 3],
        "line-gap-width": ["interpolate", ["linear"], ["zoom"], 12, 0, 20, 6],
        "line-opacity": 1,
        "line-width": [
          "interpolate",
          ["exponential", 1.4],
          ["zoom"],
          8,
          1,
          20,
          2
        ]
      }
    },
    {
      "id": "waterway_river",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "waterway",
      "filter": [
        "all",
        ["==", ["get", "class"], "river"],
        ["!=", ["get", "brunnel"], "tunnel"]
      ],
      "layout": {"line-cap": "round"},
      "paint": {
        "line-color": "rgba(0, 37, 53, 1)",
        "line-width": [
          "interpolate",
          ["exponential", 1.2],
          ["zoom"],
          11,
          0.5,
          20,
          6
        ]
      }
    },
    {
      "id": "waterway_other",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "waterway",
      "filter": [
        "all",
        ["!=", ["get", "class"], "river"],
        ["!=", ["get", "brunnel"], "tunnel"]
      ],
      "layout": {"line-cap": "round"},
      "paint": {
        "line-color": "rgba(0, 37, 53, 1)",
        "line-width": [
          "interpolate",
          ["exponential", 1.3],
          ["zoom"],
          13,
          0.5,
          20,
          6
        ]
      }
    },
    {
      "id": "water",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "water",
      "filter": ["!=", ["get", "brunnel"], "tunnel"],
      "paint": {"fill-color": "rgba(0, 37, 53, 1)"}
    },
    {
      "id": "tracklines-casing",
      "type": "line",
      "source": "tracklines",
      "source-layer": "tracklines",
      "minzoom": 7,
      "layout": {"line-cap": "round", "line-join": "round"},
      "paint": {
        "line-color": "#0b0b0b",
        "line-opacity": 1,
        "line-width": [
          "interpolate",
          ["linear"],
          ["zoom"],
          8, 2.4,
          12, 3.2,
          16, 4.2,
          20, 6
        ]
      }
    },
    {
      "id": "tracklines",
      "type": "line",
      "source": "tracklines",
      "source-layer": "tracklines",
      "minzoom": 7,
      "layout": {
        "line-cap": "round",
        "line-join": "round",
        "visibility": "visible"
      },
      "paint": {
        "line-color": "#ff8a00",
        "line-opacity": 1,
        "line-width": [
          "interpolate",
          ["linear"],
          ["zoom"],
          8, 1.6,
          12, 2.2,
          16, 3,
          20, 4.2
        ]
      }
    },

    /* --- ADDED: invisible fat pick layer for reliable hit-testing --- */
    {
      "id": "tracklines-pick",
      "type": "line",
      "source": "tracklines",
      "source-layer": "tracklines",
      "minzoom": 7,
      "layout": {
        "line-cap": "round",
        "line-join": "round",
        "visibility": "visible"
      },
      "paint": {
        "line-width": 24,
        "line-color": "#000000",
        "line-opacity": 0.001
      }
    },

    {
      "id": "landcover_sand",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": ["==", ["get", "class"], "sand"],
      "paint": {"fill-color": "#2e2b26"}
    },
    {
      "id": "aeroway_fill",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "aeroway",
      "minzoom": 11,
      "filter": [
        "match",
        ["geometry-type"],
        ["MultiPolygon", "Polygon"],
        true,
        false
      ],
      "paint": {"fill-color": "#2e2e2e", "fill-opacity": 0.7}
    },
    {
      "id": "aeroway_runway",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "aeroway",
      "minzoom": 11,
      "filter": [
        "all",
        [
          "match",
          ["geometry-type"],
          ["LineString", "MultiLineString"],
          true,
          false
        ],
        ["==", ["get", "class"], "runway"]
      ],
      "paint": {
        "line-color": "#444444",
        "line-width": [
          "interpolate",
          ["exponential", 1.2],
          ["zoom"],
          11, 3,
          20, 16
        ]
      }
    },
    {
      "id": "aeroway_taxiway",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "aeroway",
      "minzoom": 11,
      "filter": [
        "all",
        [
          "match",
          ["geometry-type"],
          ["LineString", "MultiLineString"],
          true,
          false
        ],
        ["==", ["get", "class"], "taxiway"]
      ],
      "paint": {
        "line-color": "#3a3a3a",
        "line-width": [
          "interpolate",
          ["exponential", 1.2],
          ["zoom"],
          11, 0.5,
          20, 6
        ]
      }
    },

    /* … the rest of your layers remain unchanged … */

    {
      "id": "tracklines-labels",
      "type": "symbol",
      "source": "tracklines",
      "source-layer": "tracklines",
      "minzoom": 15,
      "filter": ["has", "TRACK_NAME"],
      "layout": {
        "symbol-placement": "line-center",
        "symbol-spacing": 350,
        "text-field": ["coalesce", ["get", "TRACK_NAME"], ["get", "name"]],
        "text-font": ["Noto Sans Regular"],
        "text-size": ["interpolate", ["linear"], ["zoom"], 12, 11, 15, 12.5, 18, 14],
        "text-rotation-alignment": "map",
        "text-keep-upright": true
      },
      "paint": {
        "text-color": "#fff",
        "text-halo-color": "#000000",
        "text-halo-width": 1.2,
        "text-halo-blur": 0.4
      }
    },
    {
      "id": "mileposts-nodes",
      "type": "circle",
      "source": "mileposts",
      "source-layer": "mileposts",
      "minzoom": 12,
      "paint": {
        "circle-radius": ["interpolate", ["linear"], ["zoom"], 12, 1.2, 18, 2.2],
        "circle-color": "rgba(255, 180, 0, 1)",
        "circle-opacity": ["interpolate", ["linear"], ["zoom"], 12, 0.2, 16, 0.55]
      }
    }
  ],
  "id": "xsncpo2lb"
}
             
             
             
             
